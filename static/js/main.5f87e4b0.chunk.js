(this["webpackJsonpguess-app"]=this["webpackJsonpguess-app"]||[]).push([[0],{20:function(e,t,a){e.exports=a(33)},32:function(e,t,a){},33:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(18),l=a.n(r),s=a(9),i=a(8),o=a.n(i),u=a(12),m=a(10),p=a(6),d=a(1),h=(a(26),"m91i3eb05usl1nmkk3fcdk5i64"),v="q38s6vu0gsm9go0843tlat6as5",f={audio:!1,video:{facingMode:"environment",width:{ideal:1280},height:{ideal:720}}},E=Object(n.createContext)(null),b={type:void 0,value:void 0,detectDate:void 0};var y=function(){var e=Object(n.useState)(b),t=Object(m.a)(e,2),a=t[0],r=t[1],l=Object(n.useState)(!1),s=Object(m.a)(l,2),i=s[0],o=s[1];return c.a.createElement(E.Provider,{value:{appData:a,setAppDate:r}},c.a.createElement(p.a,null,c.a.createElement(c.a.Fragment,null,c.a.createElement("header",null,c.a.createElement("nav",{className:"navbar is-primary",role:"navigation","aria-label":"main navigation"},c.a.createElement("div",{className:"navbar-brand"},c.a.createElement("img",{className:"logo",src:"/Guess-App/logo.png",alt:"logo"}),c.a.createElement("div",{className:"navbar-burger burger ".concat(i?"is-active":""," "),onClick:function(){return o(!i)}},c.a.createElement("span",{"aria-hidden":"true"}),c.a.createElement("span",{"aria-hidden":"true"}),c.a.createElement("span",{"aria-hidden":"true"}))),c.a.createElement("div",{className:"navbar-menu ".concat(i?"is-active":"")},c.a.createElement("div",{className:"navbar-start"},c.a.createElement(p.b,{to:"/",className:"navbar-item"},"Home"),c.a.createElement(p.b,{to:"/upload",className:"navbar-item"},"New photo"))))),c.a.createElement("section",{className:"section"},c.a.createElement("div",{className:"container"},c.a.createElement(d.c,null,c.a.createElement(d.a,{path:"/upload",exact:!0},c.a.createElement(x,null)),c.a.createElement(d.a,{path:"/upload/camera"},c.a.createElement(w,null)),c.a.createElement(d.a,{path:"/upload/file"},c.a.createElement(k,null)),c.a.createElement(d.a,{path:"/upload/url"},c.a.createElement(D,null)),c.a.createElement(d.a,{path:"/display"},c.a.createElement(C,null)),c.a.createElement(d.a,{path:"/Guess-App",exact:!0},c.a.createElement(O,null))))),c.a.createElement("footer",{className:"footer"},c.a.createElement("div",{className:"content has-text-centered"},c.a.createElement("h4",null,"Created by Rafa\u0142 Bia\u0142ek"))))))};function g(){return(g=Object(u.a)(o.a.mark((function e(t){var a,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://api.skybiometry.com/fc/faces/detect.json?api_key=".concat(h,"&api_secret=").concat(v,"&urls=").concat(t,"&attributes=all"));case 2:return a=e.sent,e.next=5,a.json();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function N(e){return j.apply(this,arguments)}function j(){return(j=Object(u.a)(o.a.mark((function e(t){var a,n,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a=new FormData).append(t.name,t),e.next=4,fetch("https://api.skybiometry.com/fc/faces/detect.json?api_key=".concat(h,"&api_secret=").concat(v,"&attributes=all"),{method:"POST",headers:{accept:"*/*","accept-language":"en,pl-PL;q=0.9,pl;q=0.8,en-US;q=0.7","content-type":"multipart/form-data; boundary=----WebKitFormBoundaryLt6uRXWisasam5wO","sec-fetch-dest":"empty","sec-fetch-mode":"cors","sec-fetch-site":"same-site"},body:a});case 4:return n=e.sent,e.next=7,n.json();case 7:return c=e.sent,e.abrupt("return",c);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function O(){var e=Object(n.useContext)(E),t=e.appData,a=e.setAppDate;return Object(n.useEffect)((function(){t&&void 0!==t.type&&a(b)}),[]),c.a.createElement("div",null,c.a.createElement("h1",{className:"title is-1 has-text-centered"},"Upload your photo"),c.a.createElement("h1",{className:"subtitle is-1 has-text-centered"},"let me guess who you are and how you feel today"),c.a.createElement("div",{className:"has-text-centered"},c.a.createElement(p.b,{className:"button is-primary is-large",to:"/upload"},"Upload new photo")))}function x(){var e=Object(n.useContext)(E),t=e.appData,a=e.setAppDate;return Object(n.useEffect)((function(){t&&void 0!==t.type&&a(b)}),[]),c.a.createElement("div",null,c.a.createElement("div",{className:"content has-text-centered"},c.a.createElement("h3",{className:"title is-3"},"How you want upload photo?")),c.a.createElement("div",{className:"columns is-desktop"},c.a.createElement("div",{className:"column has-text-centered"},c.a.createElement(p.b,{className:"button is-medium is-primary",to:"/upload/camera"},"Camera",c.a.createElement("i",{className:"fa fa-video-camera","aria-hidden":"true"}))),c.a.createElement("div",{className:"column has-text-centered"},c.a.createElement(p.b,{className:"button is-medium is-link",to:"/upload/file"},"File",c.a.createElement("i",{className:"fa fa-file-o","aria-hidden":"true"}))),c.a.createElement("div",{className:"column has-text-centered"},c.a.createElement(p.b,{className:"button is-medium is-success",to:"/upload/url"},"URL",c.a.createElement("i",{className:"fa fa-link","aria-hidden":"true"})))))}function w(){var e=Object(n.useContext)(E),t=e.appData,a=e.setAppDate,r=Object(n.useState)(null),l=Object(m.a)(r,2),s=l[0],i=l[1],p=Object(d.f)();function h(){s.getTracks().forEach((function(e){e.stop()}))}Object(n.useEffect)((function(){function e(){return(e=Object(u.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,navigator.mediaDevices.getUserMedia(f);case 3:t=e.sent,i(t),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}if(s)return function(){return h()};!function(){e.apply(this,arguments)}()}),[s]),Object(n.useEffect)((function(){t&&void 0!==t.type&&p.push("/display")}),[t]);var v=Object(n.useRef)(null),b=Object(n.useRef)(null);return s&&v.current&&!v.current.srcObject&&(v.current.srcObject=s),c.a.createElement("div",{className:"content has-text-centered"},c.a.createElement("h3",{className:"title is-3"},"Take a photo by your camera"),c.a.createElement("div",{className:"video-container"},c.a.createElement("video",{ref:v,onCanPlay:function(){v.current.play()},autoPlay:!0,muted:!0}),c.a.createElement("canvas",{ref:b,width:"1280",height:"720 "})),c.a.createElement("div",{className:" has-text-right"},c.a.createElement("button",{className:"button is-medium is-primary",onClick:function(){b.current.getContext("2d").drawImage(v.current,0,0,1280,720),b.current.toBlob((function(e){return a({type:"camera",value:e})})),h()}},"Submit")))}function k(){var e=Object(n.useContext)(E),t=e.appData,a=e.setAppDate;return c.a.createElement("div",null,c.a.createElement("div",{className:"content has-text-centered"},c.a.createElement("h3",{className:"title is-3"},"Select your photo files")),c.a.createElement("div",{className:"columns is-desktop"},c.a.createElement("div",{className:"column"},c.a.createElement("div",{className:"field"},c.a.createElement("div",{className:"file is-primary has-name is-boxed"},c.a.createElement("label",{className:"file-label"},c.a.createElement("input",{className:"file-input",type:"file",name:"resume",onChange:function(e){return a({type:"file",value:e.target.files[0]})}}),c.a.createElement("span",{className:"file-cta"},c.a.createElement("span",{className:"file-icon"},c.a.createElement("i",{className:"fa fa-cloud-upload","aria-hidden":"true"})),c.a.createElement("span",{className:"file-label"},"Select file\u2026")),c.a.createElement("span",{className:"file-name"},"file"===t.type?t.value.name:"File name"))))),c.a.createElement("div",{className:"column "},c.a.createElement(p.b,{className:"button is-primary is-medium",to:"/display"},"Submit"))))}function D(){var e=Object(n.useContext)(E),t=e.appData,a=e.setAppDate;return c.a.createElement("div",null,c.a.createElement("div",{className:"content has-text-centered"},c.a.createElement("h3",{className:"title is-3"},"Input url with http/https your photo")),c.a.createElement("div",{className:"field"},c.a.createElement("div",{className:"control"},c.a.createElement("input",{className:"input is-medium",value:t&&"url"===t.type?t.value:"",type:"text",onChange:function(e){return a({type:"url",value:e.target.value})},placeholder:"Input URL..."}))),c.a.createElement("div",{className:"has-text-right"},c.a.createElement(p.b,{className:"button is-primary is-medium",to:"/display"},"Submit")))}function C(){var e=Object(n.useContext)(E),t=e.appData,a=e.setAppDate,r=Object(n.useState)(void 0),l=Object(m.a)(r,2),i=l[0],o=l[1],u=Object(n.useState)(!1),p=Object(m.a)(u,2),h=p[0],v=p[1],f=Object(d.f)();return Object(n.useEffect)((function(){var e;t&&t.value&&void 0===t.detectDate&&!h&&(v(!0),"url"===t.type&&(o(t.value),function(e){return g.apply(this,arguments)}(t.value).then((function(e){e&&e.photos[0]&&0!==e.photos[0].tags.lenght&&a(Object(s.a)(Object(s.a)({},t),{},{detectDate:e.photos[0].tags[0]})),v(!1)}))),"file"===t.type&&((e=t.value,new Promise((function(t,a){var n=new FileReader;n.onload=function(e){return t(e.target.result)},n.onerror=function(e){return a(e)},n.readAsDataURL(e)}))).then((function(e){return o(e)})),N(t.value).then((function(e){e&&e.photos[0]&&0!==e.photos[0].tags.lenght&&a(Object(s.a)(Object(s.a)({},t),{},{detectDate:e.photos[0].tags[0]})),v(!1)}))),"camera"===t.type&&(o(URL.createObjectURL(t.value)),N(t.value).then((function(e){e&&e.photos[0]&&0!==e.photos[0].tags.lenght&&a(Object(s.a)(Object(s.a)({},t),{},{detectDate:e.photos[0].tags[0]})),v(!1)})))),t&&void 0===t.type&&f.push("/Guess-App")}),[t]),c.a.createElement("div",null,c.a.createElement("div",{className:"content has-text-centered"},c.a.createElement("h3",{className:"title is-3"},"I thing you are")),c.a.createElement("div",{className:"columns is-desktop"},c.a.createElement("div",{className:"column"},c.a.createElement("img",{src:i,alt:"yourFace"})),c.a.createElement("div",{className:"column is-relative"},h?c.a.createElement("div",{className:"loader-wrapper is-active"},c.a.createElement("div",{className:"loader is-loading"})):c.a.createElement(S,null))))}function S(){var e=Object(n.useContext)(E),t=e.appData,a=(e.setAppDate,{});if(void 0!==t.detectDate){var r=t.detectDate.attributes;a.age=r.age_est&&r.age_est.value;var l=r.ethnicity&&Object.entries(r.ethnicity).find((function(e){return"true"===e[1].value}));void 0!==l&&(a.ethnicity=l[0]),a.gender=r.gender&&r.gender.value,a.eyesOpened=r.eyes&&"open"===r.eyes.value,a.feeling=r.mood.value,"female"===a.gender&&(a.element=r.glasses&&"true"===r.glasses.value||r.dark_glasses&&"true"===r.dark_glasses.value?"glasses":r.hat&&"true"===r.hat.value&&"hat"),"male"===a.gender&&(a.element=r.mustache&&"true"===r.mustache.value?"mustache":r.beard&&"true"===r.beard.value?"beard":r.hat&&"true"===r.hat.value&&"hat")}return c.a.createElement("div",null,void 0===t.detectDate&&c.a.createElement("h3",{className:"subtitle is-3"},"Error!"),a.age&&c.a.createElement("span",null,"You're about ".concat(a.age," years old. ")),a.ethnicity&&a.gender&&c.a.createElement("span",null,"I think you're a  ".concat(a.ethnicity," ").concat("female"===a.gender?"women":"men",". ")),!0===a.eyesOpened&&c.a.createElement("span",null,"The picture came out well, your eyes are open. "),a.element&&c.a.createElement("span",null,"You have awasome ".concat(a.menElement,". ")),a.feeling&&c.a.createElement("span",null,"In the picture, you look  ".concat(a.feeling,". ")))}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(32);l.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(y,{className:"app"})),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[20,1,2]]]);
//# sourceMappingURL=main.5f87e4b0.chunk.js.map