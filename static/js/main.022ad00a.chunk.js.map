{"version":3,"sources":["App.jsx","serviceWorker.js","index.jsx"],"names":["API_KEY","API_SECRET","CAPTURE_OPTIONS","audio","video","facingMode","width","ideal","height","AppContext","createContext","initialAppData","type","undefined","value","detectDate","App","useState","appData","setAppDate","isMobileMenuOpen","setIsMobileMenuOpen","Provider","className","role","aria-label","src","process","alt","onClick","aria-hidden","to","path","exact","UploadSelector","UploadCamera","UploadFile","UploadUrl","Display","Home","url","a","fetch","response","json","data","detectByFileRequest","file","FormData","append","name","method","headers","accept","body","post","useContext","useEffect","mediaStream","setMediaStream","history","useHistory","cleanup","getTracks","forEach","track","stop","navigator","mediaDevices","getUserMedia","stream","console","log","enableStream","push","videoRef","useRef","canvasRef","current","srcObject","ref","onCanPlay","play","autoPlay","muted","getContext","drawImage","toBlob","blob","onChange","e","target","files","placeholder","img","setImg","isLoading","setIsLoading","detectByURlRequest","then","photos","tags","lenght","Promise","res","rej","reader","FileReader","onload","result","onerror","readAsDataURL","URL","createObjectURL","DetectedInfo","attributes","age","age_est","foundEthnicity","ethnicity","Object","entries","find","item","gender","eyesOpened","eyes","feeling","mood","element","glasses","dark_glasses","hat","mustache","beard","menElement","Boolean","window","location","hostname","match","ReactDOM","render","StrictMode","document","getElementById","serviceWorker","ready","registration","unregister","catch","error","message"],"mappings":"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","file":"static/js/main.022ad00a.chunk.js","sourcesContent":["import React, {\r\n  useState,\r\n  createContext,\r\n  useContext,\r\n  useEffect,\r\n  useRef,\r\n} from 'react';\r\nimport {\r\n  BrowserRouter as Router,\r\n  Switch,\r\n  Route,\r\n  Link,\r\n  useHistory,\r\n} from 'react-router-dom';\r\n\r\nimport 'font-awesome/css/font-awesome.css';\r\n\r\nconst API_KEY = 'm91i3eb05usl1nmkk3fcdk5i64';\r\nconst API_SECRET = 'q38s6vu0gsm9go0843tlat6as5';\r\n//should be in env files ^^\r\n\r\nconst CAPTURE_OPTIONS = {\r\n  audio: false,\r\n  video: {\r\n    facingMode: 'environment',\r\n    width: { ideal: 1280 },\r\n    height: { ideal: 720 },\r\n  },\r\n};\r\n\r\nconst readURL = file => {\r\n  return new Promise((res, rej) => {\r\n    const reader = new FileReader();\r\n    reader.onload = e => res(e.target.result);\r\n    reader.onerror = e => rej(e);\r\n    reader.readAsDataURL(file);\r\n  });\r\n};\r\n\r\nconst AppContext = createContext(null);\r\n\r\nconst initialAppData = {\r\n  type: undefined,\r\n  value: undefined,\r\n  detectDate: undefined,\r\n};\r\n\r\nfunction App() {\r\n  const [appData, setAppDate] = useState(initialAppData);\r\n  const [isMobileMenuOpen, setIsMobileMenuOpen] = useState(false);\r\n\r\n  return (\r\n    <AppContext.Provider value={{ appData, setAppDate }}>\r\n      <Router>\r\n        <>\r\n          <header>\r\n            <nav\r\n              className=\"navbar is-primary\"\r\n              role=\"navigation\"\r\n              aria-label=\"main navigation\">\r\n              <div className=\"navbar-brand\">\r\n                <img\r\n                  className=\"logo\"\r\n                  src={process.env.PUBLIC_URL + '/logo.png'}\r\n                  alt=\"logo\"\r\n                />\r\n\r\n                <div\r\n                  className={`navbar-burger burger ${\r\n                    isMobileMenuOpen ? 'is-active' : ''\r\n                  } `}\r\n                  onClick={() => setIsMobileMenuOpen(!isMobileMenuOpen)}>\r\n                  <span aria-hidden=\"true\"></span>\r\n                  <span aria-hidden=\"true\"></span>\r\n                  <span aria-hidden=\"true\"></span>\r\n                </div>\r\n              </div>\r\n\r\n              <div\r\n                className={`navbar-menu ${\r\n                  isMobileMenuOpen ? 'is-active' : ''\r\n                }`}>\r\n                <div className=\"navbar-start\">\r\n                  <Link to=\"/\" className=\"navbar-item\">\r\n                    Home\r\n                  </Link>\r\n\r\n                  <Link to=\"/upload\" className=\"navbar-item\">\r\n                    New photo\r\n                  </Link>\r\n                </div>\r\n              </div>\r\n            </nav>\r\n          </header>\r\n\r\n          <section className=\"section\">\r\n            <div className=\"container\">\r\n              <Switch>\r\n                <Route path=\"/upload\" exact={true}>\r\n                  <UploadSelector />\r\n                </Route>\r\n                <Route path=\"/upload/camera\">\r\n                  <UploadCamera />\r\n                </Route>\r\n                <Route path=\"/upload/file\">\r\n                  <UploadFile />\r\n                </Route>\r\n                <Route path=\"/upload/url\">\r\n                  <UploadUrl />\r\n                </Route>\r\n                <Route path=\"/display\">\r\n                  <Display />\r\n                </Route>\r\n                <Route path=\"/\" exact={true}>\r\n                  <Home />\r\n                </Route>\r\n              </Switch>\r\n            </div>\r\n          </section>\r\n\r\n          <footer className=\"footer\">\r\n            <div className=\"content has-text-centered\">\r\n              <h4>Created by Rafał Białek</h4>\r\n            </div>\r\n          </footer>\r\n        </>\r\n      </Router>\r\n    </AppContext.Provider>\r\n  );\r\n}\r\n\r\nexport default App;\r\n\r\nasync function detectByURlRequest(url) {\r\n  const response = await fetch(\r\n    `http://api.skybiometry.com/fc/faces/detect.json?api_key=${API_KEY}&api_secret=${API_SECRET}&urls=${url}&attributes=all`\r\n  );\r\n  const data = await response.json();\r\n  return data;\r\n}\r\n\r\nasync function detectByFileRequest(file) {\r\n  const data = new FormData();\r\n\r\n  data.append(file.name, file);\r\n\r\n  const post = await fetch(\r\n    `http://api.skybiometry.com/fc/faces/detect.json?api_key=${API_KEY}&api_secret=${API_SECRET}&attributes=all`,\r\n    {\r\n      method: 'POST',\r\n      headers: {\r\n        accept: '*/*',\r\n        'accept-language': 'en,pl-PL;q=0.9,pl;q=0.8,en-US;q=0.7',\r\n        'content-type':\r\n          'multipart/form-data; boundary=----WebKitFormBoundaryLt6uRXWisasam5wO',\r\n        'sec-fetch-dest': 'empty',\r\n        'sec-fetch-mode': 'cors',\r\n        'sec-fetch-site': 'same-site',\r\n      },\r\n      body: data,\r\n    }\r\n  );\r\n  const response = await post.json();\r\n  return response;\r\n}\r\n\r\nfunction Home() {\r\n  const { appData, setAppDate } = useContext(AppContext);\r\n\r\n  useEffect(() => {\r\n    if (appData && appData.type !== undefined) {\r\n      setAppDate(initialAppData);\r\n    }\r\n  }, []);\r\n\r\n  return (\r\n    <div>\r\n      <h1 className=\"title is-1 has-text-centered\">Upload your photo</h1>\r\n      <h1 className=\"subtitle is-1 has-text-centered\">\r\n        let me guess who you are and how you feel today\r\n      </h1>\r\n      <div className=\"has-text-centered\">\r\n        <Link className=\"button is-primary is-large\" to=\"/upload\">\r\n          Upload new photo\r\n        </Link>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction UploadSelector() {\r\n  const { appData, setAppDate } = useContext(AppContext);\r\n\r\n  useEffect(() => {\r\n    if (appData && appData.type !== undefined) {\r\n      setAppDate(initialAppData);\r\n    }\r\n  }, []);\r\n\r\n  return (\r\n    <div>\r\n      <div className=\"content has-text-centered\">\r\n        <h3 className=\"title is-3\">How you want upload photo?</h3>\r\n      </div>\r\n      <div className=\"columns is-desktop\">\r\n        <div className=\"column has-text-centered\">\r\n          <Link className=\"button is-medium is-primary\" to=\"/upload/camera\">\r\n            Camera\r\n            <i className=\"fa fa-video-camera\" aria-hidden=\"true\"></i>\r\n          </Link>\r\n        </div>\r\n\r\n        <div className=\"column has-text-centered\">\r\n          <Link className=\"button is-medium is-link\" to=\"/upload/file\">\r\n            File\r\n            <i className=\"fa fa-file-o\" aria-hidden=\"true\"></i>\r\n          </Link>\r\n        </div>\r\n\r\n        <div className=\"column has-text-centered\">\r\n          <Link className=\"button is-medium is-success\" to=\"/upload/url\">\r\n            URL\r\n            <i className=\"fa fa-link\" aria-hidden=\"true\"></i>\r\n          </Link>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction UploadCamera() {\r\n  const { appData, setAppDate } = useContext(AppContext);\r\n  const [mediaStream, setMediaStream] = useState(null);\r\n\r\n  const history = useHistory();\r\n\r\n  function cleanup() {\r\n    mediaStream.getTracks().forEach(track => {\r\n      track.stop();\r\n    });\r\n  }\r\n\r\n  useEffect(() => {\r\n    async function enableStream() {\r\n      try {\r\n        const stream = await navigator.mediaDevices.getUserMedia(\r\n          CAPTURE_OPTIONS\r\n        );\r\n        setMediaStream(stream);\r\n      } catch (err) {\r\n        console.log(err);\r\n      }\r\n    }\r\n\r\n    if (!mediaStream) {\r\n      enableStream();\r\n    } else {\r\n      return () => cleanup();\r\n    }\r\n  }, [mediaStream]);\r\n\r\n  useEffect(() => {\r\n    if (appData && appData.type !== undefined) {\r\n      history.push('/display');\r\n    }\r\n  }, [appData]);\r\n\r\n  const videoRef = useRef(null);\r\n  const canvasRef = useRef(null);\r\n\r\n  if (mediaStream && videoRef.current && !videoRef.current.srcObject) {\r\n    videoRef.current.srcObject = mediaStream;\r\n  }\r\n\r\n  function handleCanPlay() {\r\n    videoRef.current.play();\r\n  }\r\n\r\n  function handleCapture() {\r\n    const context = canvasRef.current.getContext('2d');\r\n\r\n    context.drawImage(videoRef.current, 0, 0, 1280, 720);\r\n\r\n    canvasRef.current.toBlob(blob =>\r\n      setAppDate({ type: 'camera', value: blob })\r\n    );\r\n    cleanup();\r\n  }\r\n\r\n  return (\r\n    <div className=\"content has-text-centered\">\r\n      <h3 className=\"title is-3\">Take a photo by your camera</h3>\r\n      <div className=\"video-container\">\r\n        <video ref={videoRef} onCanPlay={handleCanPlay} autoPlay muted />\r\n        <canvas ref={canvasRef} width=\"1280\" height=\"720 \" />\r\n      </div>\r\n\r\n      <div className=\" has-text-right\">\r\n        <button className=\"button is-medium is-primary\" onClick={handleCapture}>\r\n          Submit\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction UploadFile() {\r\n  const { appData, setAppDate } = useContext(AppContext);\r\n\r\n  return (\r\n    <div>\r\n      <div className=\"content has-text-centered\">\r\n        <h3 className=\"title is-3\">Select your photo files</h3>\r\n      </div>\r\n\r\n      <div className=\"columns is-desktop\">\r\n        <div className=\"column\">\r\n          <div className=\"field\">\r\n            <div className=\"file is-primary has-name is-boxed\">\r\n              <label className=\"file-label\">\r\n                <input\r\n                  className=\"file-input\"\r\n                  type=\"file\"\r\n                  name=\"resume\"\r\n                  onChange={e =>\r\n                    setAppDate({ type: 'file', value: e.target.files[0] })\r\n                  }\r\n                />\r\n                <span className=\"file-cta\">\r\n                  <span className=\"file-icon\">\r\n                    <i className=\"fa fa-cloud-upload\" aria-hidden=\"true\"></i>\r\n                  </span>\r\n                  <span className=\"file-label\">Select file…</span>\r\n                </span>\r\n                <span className=\"file-name\">\r\n                  {appData.type === 'file' ? appData.value.name : 'File name'}\r\n                </span>\r\n              </label>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div className=\"column \">\r\n          <Link className=\"button is-primary is-medium\" to=\"/display\">\r\n            Submit\r\n          </Link>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction UploadUrl() {\r\n  const { appData, setAppDate } = useContext(AppContext);\r\n  return (\r\n    <div>\r\n      <div className=\"content has-text-centered\">\r\n        <h3 className=\"title is-3\">Input url with http/https your photo</h3>\r\n      </div>\r\n\r\n      <div className=\"field\">\r\n        <div className=\"control\">\r\n          <input\r\n            className=\"input is-medium\"\r\n            value={appData && appData.type === 'url' ? appData.value : ''}\r\n            type=\"text\"\r\n            onChange={e => setAppDate({ type: 'url', value: e.target.value })}\r\n            placeholder=\"Input URL...\"\r\n          />\r\n        </div>\r\n      </div>\r\n      <div className=\"has-text-right\">\r\n        <Link className=\"button is-primary is-medium\" to=\"/display\">\r\n          Submit\r\n        </Link>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction Display() {\r\n  const { appData, setAppDate } = useContext(AppContext);\r\n  const [img, setImg] = useState(undefined);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n\r\n  const history = useHistory();\r\n\r\n  useEffect(() => {\r\n    if (\r\n      appData &&\r\n      appData.value &&\r\n      appData.detectDate === undefined &&\r\n      !isLoading\r\n    ) {\r\n      setIsLoading(true);\r\n      if (appData.type === 'url') {\r\n        setImg(appData.value);\r\n        detectByURlRequest(appData.value).then(response => {\r\n          if (\r\n            response &&\r\n            response.photos[0] &&\r\n            response.photos[0].tags.lenght !== 0\r\n          ) {\r\n            setAppDate({ ...appData, detectDate: response.photos[0].tags[0] });\r\n          }\r\n          setIsLoading(false);\r\n        });\r\n      }\r\n      if (appData.type === 'file') {\r\n        readURL(appData.value).then(value => setImg(value));\r\n\r\n        detectByFileRequest(appData.value).then(response => {\r\n          if (\r\n            response &&\r\n            response.photos[0] &&\r\n            response.photos[0].tags.lenght !== 0\r\n          ) {\r\n            setAppDate({ ...appData, detectDate: response.photos[0].tags[0] });\r\n          }\r\n          setIsLoading(false);\r\n        });\r\n      }\r\n      if (appData.type === 'camera') {\r\n        setImg(URL.createObjectURL(appData.value));\r\n\r\n        detectByFileRequest(appData.value).then(response => {\r\n          if (\r\n            response &&\r\n            response.photos[0] &&\r\n            response.photos[0].tags.lenght !== 0\r\n          ) {\r\n            setAppDate({ ...appData, detectDate: response.photos[0].tags[0] });\r\n          }\r\n          setIsLoading(false);\r\n        });\r\n      }\r\n    }\r\n    if (appData && appData.type === undefined) {\r\n      history.push('/');\r\n    }\r\n  }, [appData]);\r\n\r\n  return (\r\n    <div>\r\n      <div className=\"content has-text-centered\">\r\n        <h3 className=\"title is-3\">I thing you are</h3>\r\n      </div>\r\n      <div className=\"columns is-desktop\">\r\n        <div className=\"column\">\r\n          <img src={img} alt=\"yourFace\" />\r\n        </div>\r\n\r\n        <div className=\"column is-relative\">\r\n          {!isLoading ? (\r\n            <DetectedInfo />\r\n          ) : (\r\n            <div className=\"loader-wrapper is-active\">\r\n              <div className=\"loader is-loading\"></div>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction DetectedInfo() {\r\n  const { appData, setAppDate } = useContext(AppContext);\r\n\r\n  let data = {};\r\n\r\n  if (appData.detectDate !== undefined) {\r\n    const attributes = appData.detectDate.attributes;\r\n    data.age = attributes.age_est && attributes.age_est.value;\r\n\r\n    const foundEthnicity =\r\n      attributes.ethnicity &&\r\n      Object.entries(attributes.ethnicity).find(\r\n        item => item[1].value === 'true'\r\n      );\r\n    if (foundEthnicity !== undefined) {\r\n      data.ethnicity = foundEthnicity[0];\r\n    }\r\n\r\n    data.gender = attributes.gender && attributes.gender.value;\r\n\r\n    data.eyesOpened = attributes.eyes && attributes.eyes.value === 'open';\r\n\r\n    data.feeling = attributes.mood.value;\r\n\r\n    if (data.gender === 'female') {\r\n      data.element =\r\n        (attributes.glasses && attributes.glasses.value === 'true') ||\r\n        (attributes.dark_glasses && attributes.dark_glasses.value === 'true')\r\n          ? 'glasses'\r\n          : attributes.hat && attributes.hat.value === 'true' && 'hat';\r\n    }\r\n\r\n    if (data.gender === 'male') {\r\n      data.element =\r\n        attributes.mustache && attributes.mustache.value === 'true'\r\n          ? 'mustache'\r\n          : attributes.beard && attributes.beard.value === 'true'\r\n          ? 'beard'\r\n          : attributes.hat && attributes.hat.value === 'true' && 'hat';\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      {appData.detectDate === undefined && (\r\n        <h3 className=\"subtitle is-3\">Error!</h3>\r\n      )}\r\n      {data.age && <span>{`You're about ${data.age} years old. `}</span>}\r\n      {data.ethnicity && data.gender && (\r\n        <span>{`I think you're a  ${data.ethnicity} ${\r\n          data.gender === 'female' ? 'women' : 'men'\r\n        }. `}</span>\r\n      )}\r\n      {data.eyesOpened === true && (\r\n        <span>The picture came out well, your eyes are open. </span>\r\n      )}\r\n      {data.element && <span>{`You have awasome ${data.menElement}. `}</span>}\r\n      {data.feeling && (\r\n        <span>{`In the picture, you look  ${data.feeling}. `}</span>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\nimport * as serviceWorker from \"./serviceWorker\";\nimport \"./styles.scss\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App className=\"app\" />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}